//
//  DetailsViewController.swift
//  Infinnovation Stock Exchange Simulator
//
//  Created by SwG Ghosh on 03/04/17.
//  Copyright © 2017 infinnovation. All rights reserved.
//

import UIKit

class DetailsViewController: UIViewController, UITableViewDelegate, UITableViewDataSource {
    var stocks: [StockItem] = [StockItem]()
    
    @IBOutlet weak var time: UILabel!
    @IBOutlet weak var activity: UIActivityIndicatorView!
    
    override func viewDidLoad() {
        super.viewDidLoad()
        // Do any additional setup after loading the view, typically from a nib.
        
        // json response
        let jsonString: String = "{\"time\":\"16/04/2017 18:38:44\",\"result\":[{\"name\":\"HDFC Bank\",\"current\":1209,\"difference\":71,\"percentage\":5.55,\"sector\":\"Banking\",\"profile\":\"HDFC Bank is an Indian banking and financial services company headquartered in Mumbai, Maharashtra. It has about 76,286 employees including 12,680 women and has a presence in Bahrain, Hong Kong and Dubai. HDFC Bank is the second largest private bank in India as measured by assets.[10] It is the largest bank in India by market capitalization as of February 2016.It was ranked 69th in 2016 BrandZTM Top 100 Most Valuable Global Brands.\"},{\"name\":\"Axis Bank\",\"current\":699,\"difference\":-104,\"percentage\":-17.48,\"sector\":\"Banking\",\"profile\":\"Axis Bank Limited is the third largest private sector bank in India. Axis Banks stake holders include prominent national and international entities. As of 31 Dec. 2013, approximately 43% of the shares are owned by Foreign Institutional Investors. Promoters (UTI, LIC and GIC), who collectively held approx. 34% of the shares, are all entities owned and controlled by the Government of India. The remaining 23% shares are owned by corporate bodies, financial institutions and individual investors among others. The bank offers financial services to customer agent covering large and mid-sized corporates, MSME, agriculture and retail businesses.Axis Bank has its registered office at Ahmedabad.\"},{\"name\":\"Yes Bank\",\"current\":1250,\"difference\":-75,\"percentage\":-6.38,\"sector\":\"Banking\",\"profile\":\"YES BANK is Indias fifth largest private sector Bank, founded by Rana Kapoor in 2004. Yes Bank is the only Greenfield Bank licence awarded by the RBI in the last two decades. YES BANK is a Full Service Commercial Bank, and has steadily built a Corporate, Retail & SME Banking franchise, Financial Markets, Investment Banking, Corporate Finance, Branch Banking, Business and Transaction Banking, and Wealth Management business lines across the country.\"},{\"name\":\"ICICI Bank\",\"current\":276,\"difference\":-6,\"percentage\":-2.22,\"sector\":\"Banking\",\"profile\":\" ICICI Bank (Industrial Credit and Investment Corporation of India) is an Indian multinational banking and financial services company headquartered in Mumbai,Maharashtra, India, with its registered office in Vadodara. In 2014, it was the second largest bank in India in terms of assets and third in term of market capitalisation. It offers a wide range of banking products and financial services for corporate and retail customers through a variety of delivery channels and specialised subsidiaries in the areas of investment banking, life, non-life insurance, venture capital and asset management. The bank has a network of 4,450 branches and 13,995 ATMs in India, and has a presence in 19 countries including India.\"},{\"name\":\"SBI\",\"current\":268,\"difference\":-8,\"percentage\":-3.08,\"sector\":\"Banking\",\"profile\":\"State Bank of India (SBI) is an Indian multinational, public sector banking and financial services company. It is a government-owned corporation with its headquarters in Mumbai, Maharashtra. As of 2014-15, it had assets of Rs 20.480 trillion (US$300 billion) and more than 14,000 branches, including 191 foreign offices spread across 36 countries, making it the largest banking and financial services company in India by assets. The company is ranked 232nd on the Fortune Global 500 list of the worlds biggest corporations as of 2016. \\r\\nState Bank of India is a banking behemoth and has 20% market share in deposits and loans among Indian commercial banks. \\r\\n\"},{\"name\":\"Bajaj Finance\",\"current\":2900,\"difference\":80,\"percentage\":2.68,\"sector\":\"Banking\",\"profile\":\"Bajaj Finserv, a part of Bajaj Holdings & Investments Limited, is an Indian financial services company  focused on lending, asset management, wealth management and insurance. \\r\\nThe company through its joint ventures and subsidiaries employs over 20,000 employees and has established a nationwide presence across over 1400 locations. The company is currently engaged in consumer finance businesses, life insurance, and general insurance and has plans to expand its business by offering a wide array of financial products and services in India. Apart from financial services, Bajaj Finserv is also active in wind energy generation. \\r\\n\"},{\"name\":\"LIC Housing Finance\",\"current\":573,\"difference\":2,\"percentage\":0.35,\"sector\":\"Banking\",\"profile\":\"LIC Housing Finance Limited (LIC HFL) is one of the largest Housing Finance companies in India having its Registered and Corporate office at Mumbai. The main objective of the Company is to provide long term finance to individuals for purchase or construction of house or flat for residential purpose / repair and renovation of existing flat / houses. The Company also provides finance on existing property for business / personal needs and also gives loans to professionals for purchase / construction of Clinics / Nursing Homes / Diagnostic Centres / Office Space and also for purchase of equipments. The Company also provides long term finance to persons engaged in the business of construction of houses or flats for residential purpose and to be sold by them.\"},{\"name\":\"Bank of Baroda\",\"current\":160,\"difference\":5,\"percentage\":3.03,\"sector\":\"Banking\",\"profile\":\"Bank of Baroda is an Indian state-owned banking and financial services company headquartered in Vadodara (earlier known as Baroda) in Gujarat, India.It is the second largest bank in India, next to State Bank Of India. Its headquarters is in Vadodara, it has a corporate office in the Bandra Kurla Complex in Mumbai. Bank of Baroda is one of the Big Four banks of India, along with ICICI Bank, State Bank of India and Punjab National Bank.\\r\\nBased on 2014 data, it is ranked 801 on Forbes Global 2000 list. BoB has total assets in excess of INR 3.58 trillion, a network of 5326 branches in India and abroad, and over 8000 ATMs.\\r\\nThe bank was founded by the Maharaja of Baroda, Maharaja Sayajirao Gaekwad III on 20 July 1908 in the Princely State of Baroda, in Gujarat. The bank, along with 13 other major commercial banks of India, was nationalised on 19 July 1969, by the Government of India and has been designated as a profit-making public sector undertaking (PSU).\\r\\nIn 2015, Bank of Baroda officials recently stumbled upon illegal transfers of a whopping Rs 6,172 crores in foreign exchange, made to Hong Kong through newly opened accounts in the banks Ashok Vihar branch.\\r\\n\"},{\"name\":\"Cipla\",\"current\":630,\"difference\":-35,\"percentage\":-5.88,\"sector\":\"Pharma\",\"profile\":\"Cipla Limited is an Indian multinational pharmaceutical and biotechnology company, headquartered in Mumbai, India.\\r\\nAs of 17 September 2014, its market capitalisation was INR 517 billion (US$7.7 billion), making it Indias 42nd largest publicly traded company by market value. Cipla sells active pharmaceutical ingredients to other manufacturers as well as pharmaceutical and personal care products, including Escitalopram (anti-depressant), Lamivudine and Fluticasone propionate.They are the worlds largest manufacturer of antiretroviral drugs.\\r\\n\"},{\"name\":\"Wockhardt\",\"current\":1000,\"difference\":-110,\"percentage\":-12.36,\"sector\":\"Pharma\",\"profile\":\"Wockhardt Ltd. is a pharmaceutical and biotechnology company headquartered in Mumbai, India. The company has manufacturing plants in India, UK, Ireland, France and US, and subsidiaries in US, UK, Ireland and France. It is a global company with more than half of its revenue coming from Europe. In 2011-2012 its UK and USA sales alone were US$475 million. It has market presence in emerging markets such as Russia, Brazil, Mexico, Vietnam, Philippines, Nigeria, Kenya, Ghana, Tanzania, Uganda, Nepal, Myanmar, Sri Lanka, Mauritius, Lebanon and Kuwait. The Company has a market capitalisation of over ?211 billion (US$3.1 billion) and an annual turnover of INR 36 billion (US$530 million). It produces formulations, biopharmaceuticals, nutrition products, vaccines and active pharmaceutical ingredients(APIs). The company employs over 7,900 people globally. Wockhardt Hospitals is a subsidiary of the Wockhardt Group.\"},{\"name\":\"Sun Pharma\",\"current\":850,\"difference\":-70,\"percentage\":-8.97,\"sector\":\"Pharma\",\"profile\":\"Sun Pharmaceutical Industries Limited  is an Indian multinational pharmaceutical company headquartered in Mumbai, Maharashtra that manufactures and sells pharmaceutical formulations and active pharmaceutical ingredients (APIs) primarily in India and the United States. The company offers formulations in various therapeutic areas, such as cardiology, psychiatry, neurology, gastroenterology and diabetology. It also provides APIs such as warfarin, carbamazepine, etodolac, and clorazepate, as well as anticancers, steroids, peptides, sex hormones, and controlled substances.\"},{\"name\":\"Dr. Reddy\",\"current\":3193,\"difference\":-43,\"percentage\":-1.37,\"sector\":\"Pharma\",\"profile\":\"Dr. Reddys Laboratories, is an Indian multinational pharmaceutical company based in Hyderabad, Telangana, India. The company was founded by Anji Reddy, who previously worked in the mentor institute, Indian Drugs and Pharmaceuticals Limited, of Hyderabad, India. Dr. Reddys manufactures and markets a wide range of pharmaceuticals in India and overseas. The company has over 190 medications, 60 active pharmaceutical ingredients (APIs) for drug manufacture, diagnostic kits, critical care, and biotechnology products.\"},{\"name\":\"Jet Airways\",\"current\":543,\"difference\":-3,\"percentage\":-0.56,\"sector\":\"Aviation\",\"profile\":\"Jet Airways is an airline based in Mumbai, India. As of February 2016, it is the second largest airline in India after IndiGo with a 21.2% passenger market share. It operates over 300 flights daily to 68 destinations worldwide from its main hub at Chhatrapati Shivaji International Airport and secondary hubs atAmsterdam Airport Schiphol, Chennai International Airport, Indira Gandhi International Airport, Kempegowda International Airport and Netaji Subhas Chandra Bose International Airport.\\r\\nIncorporated in April 1992 as a limited liability company, the airline began operations as an air taxi operator in 1993. It began full-fledged operations in 1995 with international flights added in 2004. The airline went public in 2005 and in 2007, it acquired Air Sahara. It became the largest carrier in the country by 2010 before being eclipsed by IndiGo in 2012.\\r\\n\"},{\"name\":\"SpiceJet\",\"current\":62,\"difference\":-2,\"percentage\":-3.33,\"sector\":\"Aviation\",\"profile\":\"SpiceJet is a low-cost airline headquartered in Gurgaon, India. It is the fourth largest airline in the country by number of passengers carried, with a market share of 13.1% as of February 2016. The airline operates 306 daily flights to 41 destinations, including 35 Indian and 6 international destinations from its hubs at Delhi andHyderabad.\\r\\nEstablished as air taxi provider ModiLuft in 1984, the company was acquired by Indian entrepreneur Ajay Singh in 2004 and re-christened as SpiceJet. The airline operated its first flight in May 2005. Indian media baron Kalanidhi Maran acquired a controlling stake in SpiceJet in June 2010 through Sun Group which was sold back to Ajay Singh in January 2015. The airline operates a fleet of Boeing 737 and Bombardier Dash aircraft.\\r\\n\"},{\"name\":\"InterGlobe Aviation\",\"current\":921,\"difference\":-56,\"percentage\":-6.47,\"sector\":\"Aviation\",\"profile\":\"IndiGo is a low-cost airline headquartered at Gurgaon, India. It is the largest airline in India in terms of passengers carried with a 39.8% market share as of July 2016. The airline operates 679 daily flights to 40 destinations and is the second largest low-cost carrier in Asia. It has its primary hub at Indira Gandhi International Airport,Delhi.\\r\\nThe airline was founded as a private company by Rahul Bhatia of InterGlobe Enterprises and Rakesh Gangwal, a United States-based NRI in 2006. It took delivery of its first aircraft in July 2006 and commenced operations a month later in August 2006. The airline became the largest Indian carrier in terms of passenger market share in 2012. The company went public in November 2015. The airline operates a single aircraft type of Airbus A320 with an all economy configuration.\\r\\n\"},{\"name\":\"Infosys\",\"current\":1000,\"difference\":60,\"percentage\":5.66,\"sector\":\"Information Technology\",\"profile\":\"Infosys Limited (formerly Infosys Technologies Limited) is an Indian multinational corporation that provides business consulting, information technology andoutsourcing services. It is headquartered in Bangalore, Karnataka.\\r\\nInfosys is the second-largest Indian IT services company by 2016 revenues, and the fifth largest employer of H-1B visa professionals in the United States in FY 2013. On 15 February 2015, its market capitalisation was ? 263,735 crores ($42.51 billion), making it Indias sixth largest publicly traded company.\\r\\n\"},{\"name\":\"Wipro\",\"current\":495,\"difference\":-15,\"percentage\":-3.13,\"sector\":\"Information Technology\",\"profile\":\"Wipro Limited (Western India Palm Refined Oils Limited or more recently, Western India Products Limited) is an Indian Information Technology Services corporation headquartered in Bangalore, India.\\r\\nIn 2013, Wipro demerged its non-IT businesses into a separate companies to bring in more focus on independent businesses. Wipro Limited is a global company provider of comprehensive IT solutions and services, including Systems Integration, Consulting, Information Systems outsourcing, IT-enabled services, R&D services. \\r\\nWipro entered into the technology business in 1981 and has over 140,000 employees and clients across 54 countries. IT revenues were at $7.1 billion for the year ended 31 March 2015, with a repeat business ratio of over 95%.\\r\\n\"},{\"name\":\"HCL Tech\",\"current\":739,\"difference\":51,\"percentage\":6.46,\"sector\":\"Information Technology\",\"profile\":\"HCL Technologies Limited is an Indian multinational IT services company, headquartered in Noida, Uttar Pradesh, India. It is a subsidiary of HCL Enterprise. Originally a research and development division of HCL, it emerged as an independent company in 1991 when HCL ventured into the software services business.HCL Technologies (an acronym for Hindustan Computers Limited) offers services including IT consulting, enterprise transformation, remote infrastructure management, engineering and R&D, and business process outsourcing (BPO).\\r\\nThe company has offices in 34 countries including the United States, European countries like France and Germany, and Northern Ireland in the United Kingdom. It operates across a number of sectors including aerospace and defence, automotive, consumer electronics, energy and utilities, financial services, government, industrial manufacturing, life sciences and healthcare, media and entertainment, mining and natural resources, public services, retail and consumer, semiconductor, server and storage, telecom, and travel, transportation, logistics, and hospitality.\\r\\nHCL Technologies is on the Forbes Global 2000 list. It is among the top 20 largest publicly traded companies in India with a market capitalization of $22.1 billion as of May 2015. As of August 2015, the company, along with its subsidiaries, had a consolidated revenue of $6.0 billion\\r\\n\"},{\"name\":\"TCS\",\"current\":2250,\"difference\":155,\"percentage\":6.44,\"sector\":\"Information Technology\",\"profile\":\"Tata Consultancy Services Limited (TCS) is an Indian multinational information technology (IT) service, consulting and business solutions company headquartered inMumbai, Maharashtra. It is a subsidiary of the Tata Group and operates in 46 countries. TCS is one of the largest Indian companies by market capitalization ($80 billion). TCS is now placed among the Big 4 most valuable IT services brands worldwide. In 2015, TCS is ranked 64th overall in the Forbes Worlds Most Innovative Companies ranking, making it both the highest-ranked IT services company and the first Indian company. It is the worlds 10th largest IT services provider, measured by the revenues. As of December 2015, it is ranked 10th on the Fortune India 500 list.\"},{\"name\":\"ITC\",\"current\":240,\"difference\":20,\"percentage\":7.69,\"sector\":\"Fast Moving Consumer Goods\",\"profile\":\"ITC Limited or ITC is an Indian conglomerate headquartered in Kolkata, West Bengal. Its diversified business includes five segments: Fast-Moving Consumer Goods(FMCG), Hotels, Paperboards & Packaging, Agri Business & Information Technology.\\r\\nEstablished in 1910 as the Imperial Tobacco Company of India Limited, the company was renamed as the Indian Tobacco Company Limited in 1970 and further to I.T.C. Limited in 1974. The periods in the name were removed in September 2001 for the company to be renamed as ITC Ltd. The company completed 100 years in 2010 and as of 2012-13, had an annual turnover of US$8.31 billion and a market capitalization of US$45 billion. It employs over 25,000 people at more than 60 locations across India and is part of Forbes 2000 list.\\r\\n\"},{\"name\":\"Hind Liver\",\"current\":916,\"difference\":-6,\"percentage\":-0.66,\"sector\":\"Fast Moving Consumer Goods\",\"profile\":\"Hindustan Unilever Limited (HUL) is an Indian consumer goods company based in Mumbai, Maharashtra. It is owned by Anglo-Dutch company Unilever which owns a 67% controlling share in HUL as of March 2015 and is the holding company of HUL. HULs products include foods, beverages, cleaning agents, personal care productsand water purifiers.\\r\\nHUL was established in 1933 as Lever Brothers and, in 1956, became known as Hindustan Lever Limited, as a result of a merger between Lever Brothers, Hindustan Vanaspati Mfg. Co. Ltd. and United Traders Ltd. It is headquartered in Mumbai, India and employs over 16,000 workers, whilst also indirectly helping to facilitate the employment of over 65,000 people. The company was renamed in June 2007 as Hindustan Unilever Limited.\\r\\nHindustan Unilevers distribution covers over 2 million retail outlets across India directly and its products are available in over 6.4 million outlets in the country. As per Nielsen market research data, two out of three Indians use HUL products.\\r\\n\"},{\"name\":\"Asian Paints\",\"current\":1190,\"difference\":-20,\"percentage\":-1.71,\"sector\":\"Fast Moving Consumer Goods\",\"profile\":\"\\r\\nAsian Paints is Indias leading paint company and Asias second largest paint company, with a group turnover of Rs 155.34 billion. The group has an enviable reputation in the corporate world for professionalism, fast track growth, and building shareholder equity. Asian Paints operates in 19 countries and has 26 paint manufacturing facilities in the world servicing consumers in over 65 countries. Besides Asian Paints, the group operates around the world through its subsidiaries Berger International Limited, Apco Coatings, SCIB Paints, Taubmans and Kadisco.\\r\\nAsian Paints was included in Forbes Asias Fab 50 list of Companies in Asia Pacific in 2011, 2012, 2013 and 2014.  Forbes Global magazine USA ranked Asian Paints among the 200 Best Small Companies in the World for 2002 and 2003 and presented the Best under a Billion award, to the company. Asian Paints is the only paint company in the world to receive this recognition. Forbes has also ranked Asian Paints among the Best under a Billion companies in Asia in 2005, 2006 and 2007. The company was also felicitated as one of the most Impactful companies of the Decade by CNBC Awaaz in Jan 2015\\r\\n\"},{\"name\":\"Dabur\",\"current\":270,\"difference\":25,\"percentage\":8.47,\"sector\":\"Fast Moving Consumer Goods\",\"profile\":\"Dabur ) is Indias largest Ayurvedic medicine & related products manufacturer. Dabur was founded in 1884 by SK Burman, a physician in West Bengal, to produce and dispense Ayurvedic medicines. German company Fresenius SE bought a 73.27% equity stake in Dabur Pharma in June 2008 at Rs76.50 a share. The German company had also purchased another 17.62% shares from the market through an open offer at the same price. Burman designed Ayurvedic medication for diseases such as cholera and malaria.\\r\\nDaburs Ayurvedic Specialities Division has over 260 medicines for treating a range of ailments and body conditions, from common cold to chronic paralysis. Dabur International, a fully owned subsidiary of Dabur India formerly held shares in the UAE based Weikfield International, which it disposed of on 25 June 2012.\\r\\n\"},{\"name\":\"Larsen\",\"current\":1428,\"difference\":52,\"percentage\":3.51,\"sector\":\"Engineering and Construction\",\"profile\":\"\\r\\nLarsen & Toubro Limited, also known as L&T is an Indian multi-national conglomerate headquartered in Mumbai, Maharashtra, India. It was founded by Danish engineers taking refuge in India, as well as an Indian financing partner. The company has business interests in engineering, construction, manufacturing goods, information technology, and financial services, and also has an office in the Middle-East and other parts of Asia.\\r\\nL&T is Indias largest engineering and construction company. Described by NDTV in 2013 as a bellwether of Indias engineering & construction sector, L&T was recognised as the Company of the Year in Economic Times 2010 awards\\r\\n\"},{\"name\":\"BHEL\",\"current\":154,\"difference\":-7,\"percentage\":-4.76,\"sector\":\"Engineering and Construction\",\"profile\":\"Bharat Heavy Electricals Limited (BHEL) owned by the Government of India, is an engineering and manufacturing company based in New Delhi, India. Established in 1964, BHEL is Indias largest power plant equipment manufacturer. The company has been earning profits continuously since 1971-72 and paying dividends uninterruptedly since 1976-77.\\r\\nIt has been granted the prestigious Maharatna (big gem) status in 2013 by Govt of India for its outstanding performance.The elite list of maharatna contains another 6 behemoth PSU companies of India.\\r\\n\"},{\"name\":\"Siemens\",\"current\":1284,\"difference\":-24,\"percentage\":-1.9,\"sector\":\"Engineering and Construction\",\"profile\":\"Siemens AG is a German company headquartered in Berlin and Munich and the largest engineering company in Europe with branch offices abroad.\\r\\nThe principal divisions of the company are Industry, Energy, Healthcare, and Infrastructure & Cities, which represent the main activities of the company. The company is a prominent maker of medical diagnostics equipment and its medical health-care division, which generates about 12 percent of the companys total sales, is its second-most profitable unit, after the industrial automation division. The company is a component of the Euro Stoxx 50 stock market index. Siemens and its subsidiaries employ approximately 362,000 people worldwide and reported global revenue of around EURO 71.9 billion in 2014 according to their annual report.\\r\\n\"},{\"name\":\"Bharti Airtel\",\"current\":340,\"difference\":-15,\"percentage\":-4.62,\"sector\":\"Telecom\",\"profile\":\"Bharti Airtel Limited is an Indian global telecommunications services company based in New Delhi, India. It operates in 18 countries across South Asia, Africa, and theChannel Islands. Airtel provides GSM, 3G and 4G LTE mobile services, fixed line broadband and voice services depending upon the country of operation. It is the largest mobile network operator in India and the third largest in the world with 325 million subscribers. Airtel was named Indias second most valuable brand in the first ever Brandz ranking by Millward Brown and WPP plc.\\r\\nAirtel is credited with pioneering the business strategy of outsourcing all of its business operations except marketing, sales and finance and building the minutes factory model of low cost and high volumes. The strategy has since been adopted by several operators. Airtels equipment is provided and maintained by Ericsson and Nokia Solutions and Networks whereas IT support is provided by IBM. The transmission towers are maintained by subsidiaries and joint venture companies of Bharti including Bharti Infratel and Indus Towers in India. Ericsson agreed for the first time to be paid by the minute for installation and maintenance of their equipment rather than being paid up front, which allowed Airtel to provide low call rates of ?1/minute. \\r\\n\"},{\"name\":\"Idea\",\"current\":80,\"difference\":5,\"percentage\":5.88,\"sector\":\"Telecom\",\"profile\":\"Idea Cellular is an Indian mobile network operator based in Mumbai, Maharashtra. Idea is a pan-India integrated GSM operator offering 2G,3G and 4G mobile services. Idea is Indias fourth largest mobile operator by subscriber base, After Reliance Communications. Idea has 182 million subscribers as of 31 December 2015. \"},{\"name\":\"Reliance Communications\",\"current\":50,\"difference\":-1,\"percentage\":-2.04,\"sector\":\"Telecom\",\"profile\":\"Reliance Communications Ltd. (RCom) is an Indian Internet access and telecommunications company headquartered in Navi Mumbai, India. It provides GSM (Voice, 2G, 3G, 4G) mobile services, fixed line broadband and voice services, DTH depending upon the areas of operation. Reliance Communications is the fourth largest telecom operator in India with 98.70 million subscribers as of June 2016.\\r\\nEstablished in 2002, it is a subsidiary of Reliance Anil Dhirubhai Ambani Group. Reliance Communication IT Support is provided by Reliance Tech Services and Telecom network is maintained and operated by Ericsson, transmission towers are maintained by its subsidiary Reliance Infratel. Reliance Infocomm laid the largest Optic Fiber Cable network in the country in 2003 to 2005, approximately 135,000 km, and touched almost all top broadband cities with the help of their Franchisees - Local Cable Operators (LCOs). On an average 1900 large LCOs were connected to the Reliance Infocomm network to provide Voice, Data and Video services known as Triple Play on IPTV platform. After the split of the Telecom business venture between Mukesh Ambani and Anil Ambani, the telecom business was handed over to Anil Ambani, who later christened the company as Reliance Communications Limited.\\r\\nIn September 2016, RCom announced that it would merge its wireless business with Aircel.\\r\\n\"},{\"name\":\"Tata motors\",\"current\":600,\"difference\":-45,\"percentage\":-8.11,\"sector\":\"Automotive\",\"profile\":\"Tata Motors Limited is an Indian multinational automotive manufacturing company headquartered in Mumbai, Maharashtra, India, and a subsidiary of the Tata Group. Its products include passenger cars, trucks, vans, coaches, buses, construction equipment and military vehicles. It is the worlds 5th-largest motor vehicle manufacturing company, fourth-largest truck manufacturer, and second-largest bus manufacturer by volume.\\r\\nTata Motors has auto manufacturing and assembly plants in Jamshedpur, Pantnagar, Lucknow, Sanand, Dharwad, and Pune in India, as well as in Argentina, South Africa, Great Britain and Thailand. It has research and development centres in Pune, Jamshedpur, Lucknow, and Dharwad, India and in South Korea, Great Britain and Spain. Tata Motors principal subsidiaries purchased the English premium car maker Jaguar Land Rover (the maker of Jaguar and Land Rover cars) and the South Korean commercial vehicle manufacturer Tata Daewoo. Tata Motors has a bus-manufacturing joint venture with Marcopolo S.A. (Tata Marcopolo), a construction-equipment manufacturing joint venture with Hitachi (Tata Hitachi Construction Machinery), and a joint venture with Fiat Chrysler which manufactures automotive components and Fiat Chrysler and Tata branded vehicles.\\r\\nFounded in 1945 as a manufacturer of locomotives, the company manufactured its first commercial vehicle in 1954 in a collaboration with Daimler-Benz AG, which ended in 1969. Tata Motors entered the passenger vehicle market in 1991 with the launch of the Tata Sierra, becoming the first Indian manufacturer to achieve the capability of developing a competitive indigenous automobile. In 1998, Tata launched the first fully indigenous Indian passenger car, the Indica, and in 2008 launched the Tata Nano, the worlds cheapest car. Tata Motors acquired the South Korean truck manufacturer Daewoo Commercial Vehicles Company in 2004 and purchased Jaguar Land Roverfrom Ford in 2008.\\r\\n\"},{\"name\":\"Mahindra motors\",\"current\":1320,\"difference\":100,\"percentage\":7.04,\"sector\":\"Automotive\",\"profile\":\"Mahindra and Mahindra Limited (M&M) is an Indian multinational automobile manufacturing corporation headquartered in Mumbai, Maharashtra, India. It is one of the largest vehicle manufacturers by production in India and the largest manufacturer of tractors across the world. It is a part of Mahindra Group, an Indianconglomerate.\\r\\nIt was ranked 21st in the list of top companies of India in Fortune India 500 in 2011.\\r\\nIts major competitors in the Indian market include Maruti Suzuki, Tata Motors, Ashok Leyland and others.\\r\\n\"},{\"name\":\"Maruti Suzuki\",\"current\":5700,\"difference\":-220,\"percentage\":-4.01,\"sector\":\"Automotive\",\"profile\":\"Maruti Suzuki India Limited is an automobile manufacturer in India. It is a subsidiary of Japanese automobile and motorcycle manufacturer Suzuki Motor Corporation. As of January 2016, it had a market share of 47% of the Indian passenger car market. Maruti Suzuki manufactures and sells popular cars such as the Ertiga, Alto, Swift, Zen, Celerio, Swift DZire, SX4 and Omni. The company is headquartered at New Delhi. In February 2012, the company sold its ten millionth vehicle in India.\"},{\"name\":\"Bajaj Auto\",\"current\":3000,\"difference\":-10,\"percentage\":-0.33,\"sector\":\"Automotive\",\"profile\":\"Bajaj Auto Limited is an Indian two-wheeler and three-wheeler manufacturing company. Bajaj Auto manufactures and sells motorcycles, scooters andauto rickshaws. Bajaj Auto is a part of the Bajaj Group. It was founded by Jamnalal Bajaj in Rajasthan in the 1940s. It is based in Pune, Mumbai, with plants in Chakan (Pune), Waluj (near Aurangabad) and Pantnagar in Uttarakhand. The oldest plant at Akurdi (Pune) now houses the R&D centre Ahead.\\r\\nBajaj Auto is the worlds sixth-largest manufacturer of motorcycles and the second-largest in India. It is the worlds largest three-wheeler manufacturer.[not in citation given]\\r\\nOn May 2015, its market capitalisation was INR 640 billion (US$9.5 billion), making it Indias 23rd largest publicly traded company by market value. TheForbes Global 2000 list for the year 2012 ranked Bajaj Auto at 1,416.\\r\\n\"},{\"name\":\"ACC\",\"current\":1800,\"difference\":-150,\"percentage\":-9.09,\"sector\":\"Cement\",\"profile\":\"ACC Limited one of the largest producers of cement in India. Its registered office is called Cement House. It is located on Maharishi Karve Road, Mumbai. The stock price of company contributes in calculating BSE Sensex.\\r\\nThe management control of company was taken over by Swiss cement major Holcim in 2004. On 1 September 2006 the name of The Associated Cement Companies Limited was changed to ACC Limited. The company is only cement company to get Superbrand status in India.\\r\\n\"},{\"name\":\"Ultra Tech Cement\",\"current\":4300,\"difference\":-315,\"percentage\":-7.9,\"sector\":\"Cement\",\"profile\":\"UltraTech Cement Limited is Indias biggest cement company and Indias largest exporter of cement clinker based in Mumbai, India. The company is part of the Aditya Birla Group and division of Grasim Industries. It has an annual capacity of 64 million tonnes. UltraTech cement has been awarded the Superbrandstatus.\"},{\"name\":\"Gujarat Ambuja\",\"current\":260,\"difference\":5,\"percentage\":1.89,\"sector\":\"Cement\",\"profile\":\"Ambuja Cements Limited, formerly known as Gujarat Ambuja Cement Limited, is a major cement producing company in India. The Groups principal activity is to manufacture and market cement and clinker for both domestic and export markets\"},{\"name\":\"Reliance\",\"current\":1075,\"difference\":5,\"percentage\":0.46,\"sector\":\"Oil and Gas\",\"profile\":\"\\r\\nReliance Industries Limited (RIL) is an Indian conglomerate holding company headquartered in Mumbai, Maharashtra, India. Reliance owns businesses across India engaged in energy, petrochemicals, textiles, natural resources, retail and telecommunications. Reliance is the second most profitable company in India, the second-largest publicly traded company in India by market capitalization and the second largest company in India as measured by revenue after the government-controlled Indian Oil Corporation. The company is ranked 215th on the Fortune Global 500 list of the worlds biggest corporations as of 2016. RIL contributes approximately 20% of Indias total exports. It is ranked 8th among the Top 250 Global Energy Companies by Platts as of 2016.\\r\\n\"},{\"name\":\"ONGC\",\"current\":270,\"difference\":-15,\"percentage\":-5.88,\"sector\":\"Oil and Gas\",\"profile\":\"Oil and Natural Gas Corporation Limited (ONGC) is an Indian multinational oil and gas company headquartered in Dehradun, Uttarakhand, India. It is a Public Sector Undertaking (PSU) of the Government of India, under the administrative control of the Ministry of Petroleum and Natural Gas. It is Indias largest oil and gas explorationand production company. It produces around 77% of Indias crude oil (equivalent to around 30% of the countrys total demand) and around 62% of its natural gas.\\r\\nOn 31 March 2013, its market capitalisation was INR 2.6 trillion (US$48.98 billion), making it Indias second largest publicly traded company. \\r\\nONGC was founded on 14 August 1956 by Government of India, which currently holds a 68.94% equity stake. It is involved in exploring for and exploiting hydrocarbons in 26 sedimentary basins of India, and owns and operates over 11,000 kilometers of pipelines in the country. Its international subsidiary ONGC Videsh currently has projects in 17 countries. ONGC has discovered 6 of the 7 commercially producing Indian Basins, in the last 50 years, adding over 7.1 billion tonnes of In-place Oil & Gas volume of hydrocarbons in Indian basins. ONGC has many matured fields with a current recovery factor of 25 to 33%. Its Reserve Replacement Ratio for between 2005 and 2013, has been more than one. During FY 2012-2013, ONGC had to share the highest ever under-recovery of INR 494.2 million towards the under-recoveries of Oil Marketing Companies \\r\\n\"},{\"name\":\"HPCL\",\"current\":430,\"difference\":-25,\"percentage\":-6.17,\"sector\":\"Oil and Gas\",\"profile\":\"Hindustan Petroleum Corporation Limited (HPCL) (BSE: 500104, NSE: HINDPETRO) is an Indian state-owned oil and natural gas company with its headquarters at Mumbai, Maharashtra. It has about 25% marketing share in India among PSUs and a strong marketing infrastructure. The Government of India owns 51.11% shares in HPCL and others are distributed amongst financial institutes, public and other investors. The company is ranked 367th on the Fortune Global 500 list of the worlds biggest corporations as of 2016.\"},{\"name\":\"GAIL\",\"current\":350,\"difference\":40,\"percentage\":10.26,\"sector\":\"Oil and Gas\",\"profile\":\"GAIL (India) Limited is the largest state-owned natural gas processing and distribution company in India. It is headquartered in New Delhi. It has the following business segments: natural gas, liquid hydrocarbon, liquefied petroleum gas transmission, petrochemical, city gas distribution, exploration and production, GAILTEL and electricity generation. GAIL was conferred with the Maharatna status on 1 Feb 2013, by the Government of India. Only six other Public Sector Enterprises (PSEs) enjoy this coveted status amongst all central CPSEs. GAIL was listed in the 131st position among Indias most trusted brands according to the Brand Trust Report 2014, a study conducted by the Trust Research Advisory.\"},{\"name\":\"SBM\",\"current\":205,\"difference\":-205,\"percentage\":0,\"sector\":\"Banking\",\"profile\":\"State Bank of Mysore is a nationalised bank in India, with headquarters at Bengaluru. It is one of the five associate banks of State Bank of India.\"}]}"
        // serialise the json response into StockItem array
        let apiCall: StocksProfileListAPICall = StocksProfileListAPICall(urlString: "https://infisesapitest-swghosh.rhcloud.com/api/stockslist", apiKey: "Z9FpluAnvXADniEcz9Rcvg28U1CdNC")
        stocks = apiCall.getStocksList(jsonData: jsonString.data(using: .utf8)!)
        
        time.text = apiCall.time!
        
        
        activity.stopAnimating()
    }
    
    override func viewWillAppear(_ animated: Bool) {
        super.viewWillAppear(animated)
        // disables the navigation bar
        self.navigationController?.setNavigationBarHidden(true, animated: false)
    }

    override func didReceiveMemoryWarning() {
        super.didReceiveMemoryWarning()
        // Dispose of any resources that can be recreated.
    }
    
    func tableView(_ tableView: UITableView, cellForRowAt indexPath: IndexPath) -> UITableViewCell {
        // Conforms to the UITableViewDataSource protocol
        var cell: UITableViewCell
        cell = getDetailedStockCell(tableView, index: indexPath.row)
        return cell
    }
    
    func tableView(_ tableView: UITableView, numberOfRowsInSection section: Int) -> Int {
        return stocks.count
    }
    
    func tableView(_ tableView: UITableView, heightForRowAt indexPath: IndexPath) -> CGFloat {
        tableView.estimatedRowHeight = 170.0
        let height = UITableViewAutomaticDimension
        return height
    }
    
    func tableView(_ tableView: UITableView, didSelectRowAt indexPath: IndexPath) {
        let segueIdentifier = "FullStockFromDetails"
        performSegue(withIdentifier: segueIdentifier, sender: stocks[indexPath.row])
    }
    
    func getDetailedStockCell(_ tableView: UITableView, index: Int) -> DetailedStockTableViewCell {
        let cellIdentifier = "Detail"
        let cell = tableView.dequeueReusableCell(withIdentifier: cellIdentifier) as! DetailedStockTableViewCell
        
        let stock = stocks[index]
        var triangle = "▼"
        
        cell.difference.textColor = .red
        
        if(stock.gain) {
            cell.difference.textColor = .green
            triangle = "▲"
        }
        
        cell.name.text = stock.name
        cell.current.text = "₹\(stock.current)"
        cell.difference.text = "\(triangle) ₹\(stock.difference)"
        cell.percentage.text = "\(stock.percentage)%"
        cell.profile.text = "\(stock.profile!)"
        cell.sector.text = "\(stock.sector)"
        
        return cell
    }
    
    
    // MARK: - Navigation

    // In a storyboard-based application, you will often want to do a little preparation before navigation
    override func prepare(for segue: UIStoryboardSegue, sender: Any?) {
        // Get the new view controller using segue.destinationViewController.
        // Pass the selected object to the new view controller.
        if segue.identifier == "FullStockFromDetails" {
            let destinationViewController = segue.destination as! FullStockViewController
            destinationViewController.stock = sender as? StockItem
        }
    }

}
