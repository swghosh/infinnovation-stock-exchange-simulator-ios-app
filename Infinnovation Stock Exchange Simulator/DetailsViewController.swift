//
//  DetailsViewController.swift
//  Infinnovation Stock Exchange Simulator
//
//  Created by SwG Ghosh on 03/04/17.
//  Copyright © 2017 infinnovation. All rights reserved.
//

import UIKit

class DetailsViewController: UIViewController, UITableViewDelegate, UITableViewDataSource {
    var stocks: [DetailedStockItem] = [ DetailedStockItem(name: "Bajaj Auto", current: 2990, difference: 0, percentage: 0, sector: "Automotive", profile: "Bajaj Auto Limited is an Indian two-wheeler and three-wheeler manufacturing company. Bajaj Auto manufactures and sells motorcycles, scooters andauto rickshaws. Bajaj Auto is a part of the Bajaj Group. It was founded by Jamnalal Bajaj in Rajasthan in the 1940s. It is based in Pune, Mumbai, with plants in Chakan (Pune), Waluj (near Aurangabad) and Pantnagar in Uttarakhand. The oldest plant at Akurdi (Pune) now houses the R&D centre \'Ahead\'. Bajaj Auto is the world\'s sixth-largest manufacturer of motorcycles and the second-largest in India. It is the world\'s largest three-wheeler manufacturer.[not in citation given] On May 2015, its market capitalisation was INR 640 billion (US$9.5 billion), making it India\'s 23rd largest publicly traded company by market value. TheForbes Global 2000 list for the year 2012 ranked Bajaj Auto at 1,416. ", pclose: 2990, ovalue: 2980, lcircuit: 2700, ucircuit: 3200, dividend: 550, bvalue: 450), DetailedStockItem(name: "Mahindra motors", current: 1320, difference: 100, percentage: 7.04, sector: "Automotive", profile: "Mahindra and Mahindra Limited (M&M) is an Indian multinational automobile manufacturing corporation headquartered in Mumbai, Maharashtra, India. It is one of the largest vehicle manufacturers by production in India and the largest manufacturer of tractors across the world. It is a part of Mahindra Group, an Indianconglomerate. It was ranked 21st in the list of top companies of India in Fortune India 500 in 2011. Its major competitors in the Indian market include Maruti Suzuki, Tata Motors, Ashok Leyland and others. ", pclose: 1420, ovalue: 1415, lcircuit: 1300, ucircuit: 1550, dividend: 240, bvalue: 460), DetailedStockItem(name: "Maruti Suzuki", current: 5700, difference: -220, percentage: -4.01, sector: "Automotive", profile: "Maruti Suzuki India Limited is an automobile manufacturer in India. It is a subsidiary of Japanese automobile and motorcycle manufacturer Suzuki Motor Corporation. As of January 2016, it had a market share of 47% of the Indian passenger car market. Maruti Suzuki manufactures and sells popular cars such as the Ertiga, Alto, Swift, Zen, Celerio, Swift DZire, SX4 and Omni. The company is headquartered at New Delhi. In February 2012, the company sold its ten millionth vehicle in India.", pclose: 5480, ovalue: 5500, lcircuit: 5000, ucircuit: 6000, dividend: 700, bvalue: 915), DetailedStockItem(name: "Tata motors", current: 600, difference: -45, percentage: -8.11, sector: "Automotive", profile: "Tata Motors Limited is an Indian multinational automotive manufacturing company headquartered in Mumbai, Maharashtra, India, and a subsidiary of the Tata Group. Its products include passenger cars, trucks, vans, coaches, buses, construction equipment and military vehicles. It is the world\'s 5th-largest motor vehicle manufacturing company, fourth-largest truck manufacturer, and second-largest bus manufacturer by volume. Tata Motors has auto manufacturing and assembly plants in Jamshedpur, Pantnagar, Lucknow, Sanand, Dharwad, and Pune in India, as well as in Argentina, South Africa, Great Britain and Thailand. It has research and development centres in Pune, Jamshedpur, Lucknow, and Dharwad, India and in South Korea, Great Britain and Spain. Tata Motors\' principal subsidiaries purchased the English premium car maker Jaguar Land Rover (the maker of Jaguar and Land Rover cars) and the South Korean commercial vehicle manufacturer Tata Daewoo. Tata Motors has a bus-manufacturing joint venture with Marcopolo S.A. (Tata Marcopolo), a construction-equipment manufacturing joint venture with Hitachi (Tata Hitachi Construction Machinery), and a joint venture with Fiat Chrysler which manufactures automotive components and Fiat Chrysler and Tata branded vehicles. Founded in 1945 as a manufacturer of locomotives, the company manufactured its first commercial vehicle in 1954 in a collaboration with Daimler-Benz AG, which ended in 1969. Tata Motors entered the passenger vehicle market in 1991 with the launch of the Tata Sierra, becoming the first Indian manufacturer to achieve the capability of developing a competitive indigenous automobile. In 1998, Tata launched the first fully indigenous Indian passenger car, the Indica, and in 2008 launched the Tata Nano, the world\'s cheapest car. Tata Motors acquired the South Korean truck manufacturer Daewoo Commercial Vehicles Company in 2004 and purchased Jaguar Land Roverfrom Ford in 2008. ", pclose: 555, ovalue: 550, lcircuit: 500, ucircuit: 600, dividend: 25, bvalue: 235), DetailedStockItem(name: "InterGlobe Aviation", current: 54, difference: 811, percentage: 93.76, sector: "Aviation", profile: "IndiGo is a low-cost airline headquartered at Gurgaon, India. It is the largest airline in India in terms of passengers carried with a 39.8% market share as of July 2016. The airline operates 679 daily flights to 40 destinations and is the second largest low-cost carrier in Asia. It has its primary hub at Indira Gandhi International Airport,Delhi. The airline was founded as a private company by Rahul Bhatia of InterGlobe Enterprises and Rakesh Gangwal, a United States-based NRI in 2006. It took delivery of its first aircraft in July 2006 and commenced operations a month later in August 2006. The airline became the largest Indian carrier in terms of passenger market share in 2012. The company went public in November 2015. The airline operates a single aircraft type of Airbus A320 with an all economy configuration. ", pclose: 865, ovalue: 850, lcircuit: 760, ucircuit: 950, dividend: 3500, bvalue: 80), DetailedStockItem(name: "Jet Airways", current: 543, difference: -3, percentage: -0.56, sector: "Aviation", profile: "Jet Airways is an airline based in Mumbai, India. As of February 2016, it is the second largest airline in India after IndiGo with a 21.2% passenger market share. It operates over 300 flights daily to 68 destinations worldwide from its main hub at Chhatrapati Shivaji International Airport and secondary hubs atAmsterdam Airport Schiphol, Chennai International Airport, Indira Gandhi International Airport, Kempegowda International Airport and Netaji Subhas Chandra Bose International Airport. Incorporated in April 1992 as a limited liability company, the airline began operations as an air taxi operator in 1993. It began full-fledged operations in 1995 with international flights added in 2004. The airline went public in 2005 and in 2007, it acquired Air Sahara. It became the largest carrier in the country by 2010 before being eclipsed by IndiGo in 2012. ", pclose: 540, ovalue: 542, lcircuit: 490, ucircuit: 590, dividend: 0, bvalue: 475), DetailedStockItem(name: "SpiceJet", current: 54, difference: 6, percentage: 10, sector: "Aviation", profile: "SpiceJet is a low-cost airline headquartered in Gurgaon, India. It is the fourth largest airline in the country by number of passengers carried, with a market share of 13.1% as of February 2016. The airline operates 306 daily flights to 41 destinations, including 35 Indian and 6 international destinations from its hubs at Delhi andHyderabad. Established as air taxi provider ModiLuft in 1984, the company was acquired by Indian entrepreneur Ajay Singh in 2004 and re-christened as SpiceJet. The airline operated its first flight in May 2005. Indian media baron Kalanidhi Maran acquired a controlling stake in SpiceJet in June 2010 through Sun Group which was sold back to Ajay Singh in January 2015. The airline operates a fleet of Boeing 737 and Bombardier Dash aircraft. ", pclose: 60, ovalue: 58, lcircuit: 55, ucircuit: 65, dividend: 0, bvalue: 20), DetailedStockItem(name: "Axis Bank", current: 699, difference: -104, percentage: -17.48, sector: "Banking", profile: "Axis Bank Limited is the third largest private sector bank in India. Axis Bank\'s stake holders include prominent national and international entities. As of 31 Dec. 2013, approximately 43% of the shares are owned by Foreign Institutional Investors. Promoters (UTI, LIC and GIC), who collectively held approx. 34% of the shares, are all entities owned and controlled by the Government of India. The remaining 23% shares are owned by corporate bodies, financial institutions and individual investors among others. The bank offers financial services to customer agent covering large and mid-sized corporates, MSME, agriculture and retail businesses.Axis Bank has its registered office at Ahmedabad.", pclose: 595, ovalue: 598, lcircuit: 540, ucircuit: 660, dividend: 230, bvalue: 222), DetailedStockItem(name: "Bajaj Finance", current: 2900, difference: 80, percentage: 2.68, sector: "Banking", profile: "Bajaj Finserv, a part of Bajaj Holdings & Investments Limited, is an Indian financial services company  focused on lending, asset management, wealth management and insurance.  The company through its joint ventures and subsidiaries employs over 20,000 employees and has established a nationwide presence across over 1400 locations. The company is currently engaged in consumer finance businesses, life insurance, and general insurance and has plans to expand its business by offering a wide array of financial products and services in India. Apart from financial services, Bajaj Finserv is also active in wind energy generation.  ", pclose: 2980, ovalue: 3015, lcircuit: 2700, ucircuit: 3250, dividend: 35, bvalue: 850), DetailedStockItem(name: "Bank of Baroda", current: 160, difference: 5, percentage: 3.03, sector: "Banking", profile: "Bank of Baroda is an Indian state-owned banking and financial services company headquartered in Vadodara (earlier known as Baroda) in Gujarat, India.It is the second largest bank in India, next to State Bank Of India. Its headquarters is in Vadodara, it has a corporate office in the Bandra Kurla Complex in Mumbai. Bank of Baroda is one of the Big Four banks of India, along with ICICI Bank, State Bank of India and Punjab National Bank. Based on 2014 data, it is ranked 801 on Forbes Global 2000 list. BoB has total assets in excess of INR 3.58 trillion, a network of 5326 branches in India and abroad, and over 8000 ATMs. The bank was founded by the Maharaja of Baroda, Maharaja Sayajirao Gaekwad III on 20 July 1908 in the Princely State of Baroda, in Gujarat. The bank, along with 13 other major commercial banks of India, was nationalised on 19 July 1969, by the Government of India and has been designated as a profit-making public sector undertaking (PSU). In 2015, Bank of Baroda officials recently stumbled upon illegal transfers of a whopping Rs 6,172 crores in foreign exchange, made to Hong Kong through newly opened accounts in the bank\'s Ashok Vihar branch. ", pclose: 165, ovalue: 170, lcircuit: 140, ucircuit: 190, dividend: 0, bvalue: 180), DetailedStockItem(name: "HDFC Bank", current: 1230, difference: 50, percentage: 3.91, sector: "Banking", profile: "HDFC Bank is an Indian banking and financial services company headquartered in Mumbai, Maharashtra. It has about 76,286 employees including 12,680 women and has a presence in Bahrain, Hong Kong and Dubai. HDFC Bank is the second largest private bank in India as measured by assets.[10] It is the largest bank in India by market capitalization as of February 2016.It was ranked 69th in 2016 BrandZTM Top 100 Most Valuable Global Brands.", pclose: 1280, ovalue: 1275, lcircuit: 1180, ucircuit: 1405, dividend: 400, bvalue: 300), DetailedStockItem(name: "ICICI Bank", current: 276, difference: -6, percentage: -2.22, sector: "Banking", profile: " ICICI Bank (Industrial Credit and Investment Corporation of India) is an Indian multinational banking and financial services company headquartered in Mumbai,Maharashtra, India, with its registered office in Vadodara. In 2014, it was the second largest bank in India in terms of assets and third in term of market capitalisation. It offers a wide range of banking products and financial services for corporate and retail customers through a variety of delivery channels and specialised subsidiaries in the areas of investment banking, life, non-life insurance, venture capital and asset management. The bank has a network of 4,450 branches and 13,995 ATMs in India, and has a presence in 19 countries including India.", pclose: 270, ovalue: 275, lcircuit: 240, ucircuit: 295, dividend: 250, bvalue: 145), DetailedStockItem(name: "LIC Housing Finance", current: 573, difference: 2, percentage: 0.35, sector: "Banking", profile: "LIC Housing Finance Limited (LIC HFL) is one of the largest Housing Finance companies in India having its Registered and Corporate office at Mumbai. The main objective of the Company is to provide long term finance to individuals for purchase or construction of house or flat for residential purpose / repair and renovation of existing flat / houses. The Company also provides finance on existing property for business / personal needs and also gives loans to professionals for purchase / construction of Clinics / Nursing Homes / Diagnostic Centres / Office Space and also for purchase of equipments. The Company also provides long term finance to persons engaged in the business of construction of houses or flats for residential purpose and to be sold by them.", pclose: 575, ovalue: 590, lcircuit: 520, ucircuit: 630, dividend: 275, bvalue: 275), DetailedStockItem(name: "SBI", current: 268, difference: -8, percentage: -3.08, sector: "Banking", profile: "State Bank of India (SBI) is an Indian multinational, public sector banking and financial services company. It is a government-owned corporation with its headquarters in Mumbai, Maharashtra. As of 2014-15, it had assets of Rs 20.480 trillion (US$300 billion) and more than 14,000 branches, including 191 foreign offices spread across 36 countries, making it the largest banking and financial services company in India by assets. The company is ranked 232nd on the Fortune Global 500 list of the world\'s biggest corporations as of 2016.  State Bank of India is a banking behemoth and has 20% market share in deposits and loans among Indian commercial banks.  ", pclose: 260, ovalue: 258, lcircuit: 235, ucircuit: 290, dividend: 250, bvalue: 230), DetailedStockItem(name: "SBM", current: 205, difference: -205, percentage: 0, sector: "Banking", profile: "State Bank of Mysore is a nationalised bank in India, with headquarters at Bengaluru. It is one of the five associate banks of State Bank of India.", pclose: 0, ovalue: 170, lcircuit: 160, ucircuit: 190, dividend: 0, bvalue: 0), DetailedStockItem(name: "Yes Bank", current: 1250, difference: -75, percentage: -6.38, sector: "Banking", profile: "YES BANK is India\'s fifth largest private sector Bank, founded by Rana Kapoor in 2004. Yes Bank is the only Greenfield Bank licence awarded by the RBI in the last two decades. YES BANK is a Full Service Commercial Bank, and has steadily built a Corporate, Retail & SME Banking franchise, Financial Markets, Investment Banking, Corporate Finance, Branch Banking, Business and Transaction Banking, and Wealth Management business lines across the country.", pclose: 1175, ovalue: 1205, lcircuit: 1050, ucircuit: 1300, dividend: 100, bvalue: 325), DetailedStockItem(name: "ACC", current: 1820, difference: -170, percentage: -10.3, sector: "Cement", profile: "ACC Limited one of the largest producers of cement in India. It\'s registered office is called Cement House. It is located on Maharishi Karve Road, Mumbai. The stock price of company contributes in calculating BSE Sensex. The management control of company was taken over by Swiss cement major Holcim in 2004. On 1 September 2006 the name of The Associated Cement Companies Limited was changed to ACC Limited. The company is only cement company to get Superbrand status in India. ", pclose: 1650, ovalue: 1655, lcircuit: 1500, ucircuit: 1800, dividend: 170, bvalue: 450), DetailedStockItem(name: "Gujarat Ambuja", current: 260, difference: 5, percentage: 1.89, sector: "Cement", profile: "Ambuja Cements Limited, formerly known as Gujarat Ambuja Cement Limited, is a major cement producing company in India. The Group\'s principal activity is to manufacture and market cement and clinker for both domestic and export markets", pclose: 265, ovalue: 263, lcircuit: 230, ucircuit: 300, dividend: 140, bvalue: 50), DetailedStockItem(name: "Ultra Tech Cement", current: 4300, difference: -315, percentage: -7.9, sector: "Cement", profile: "UltraTech Cement Limited is India\'s biggest cement company and India\'s largest exporter of cement clinker based in Mumbai, India. The company is part of the Aditya Birla Group and division of Grasim Industries. It has an annual capacity of 64 million tonnes. UltraTech cement has been awarded the Superbrandstatus.", pclose: 3985, ovalue: 4000, lcircuit: 3700, ucircuit: 4400, dividend: 95, bvalue: 765), DetailedStockItem(name: "BHEL", current: 154, difference: -7, percentage: -4.76, sector: "Engineering and Construction", profile: "Bharat Heavy Electricals Limited (BHEL) owned by the Government of India, is an engineering and manufacturing company based in New Delhi, India. Established in 1964, BHEL is India\'s largest power plant equipment manufacturer. The company has been earning profits continuously since 1971-72 and paying dividends uninterruptedly since 1976-77. It has been granted the prestigious Maharatna (big gem) status in 2013 by Govt of India for its outstanding performance.The elite list of maharatna contains another 6 behemoth PSU companies of India. ", pclose: 147, ovalue: 150, lcircuit: 130, ucircuit: 170, dividend: 20, bvalue: 135), DetailedStockItem(name: "Larsen", current: 1428, difference: 52, percentage: 3.51, sector: "Engineering and Construction", profile: " Larsen & Toubro Limited, also known as L&T is an Indian multi-national conglomerate headquartered in Mumbai, Maharashtra, India. It was founded by Danish engineers taking refuge in India, as well as an Indian financing partner. The company has business interests in engineering, construction, manufacturing goods, information technology, and financial services, and also has an office in the Middle-East and other parts of Asia. L&T is India\'s largest engineering and construction company. Described by NDTV in 2013 as a bellwether of India\'s engineering & construction sector, L&T was recognised as the Company of the Year in Economic Times 2010 awards ", pclose: 1480, ovalue: 1500, lcircuit: 1340, ucircuit: 1620, dividend: 900, bvalue: 470), DetailedStockItem(name: "Siemens", current: 1284, difference: -24, percentage: -1.9, sector: "Engineering and Construction", profile: "Siemens AG is a German company headquartered in Berlin and Munich and the largest engineering company in Europe with branch offices abroad. The principal divisions of the company are Industry, Energy, Healthcare, and Infrastructure & Cities, which represent the main activities of the company. The company is a prominent maker of medical diagnostics equipment and its medical health-care division, which generates about 12 percent of the company\'s total sales, is its second-most profitable unit, after the industrial automation division. The company is a component of the Euro Stoxx 50 stock market index. Siemens and its subsidiaries employ approximately 362,000 people worldwide and reported global revenue of around EURO 71.9 billion in 2014 according to their annual report. ", pclose: 1260, ovalue: 1255, lcircuit: 1140, ucircuit: 1400, dividend: 500, bvalue: 130), DetailedStockItem(name: "Asian Paints", current: 1200, difference: -30, percentage: -2.56, sector: "Fast Moving Consumer Goods", profile: " Asian Paints is India\'s leading paint company and Asia\'s second largest paint company, with a group turnover of Rs 155.34 billion. The group has an enviable reputation in the corporate world for professionalism, fast track growth, and building shareholder equity. Asian Paints operates in 19 countries and has 26 paint manufacturing facilities in the world servicing consumers in over 65 countries. Besides Asian Paints, the group operates around the world through its subsidiaries Berger International Limited, Apco Coatings, SCIB Paints, Taubmans and Kadisco. Asian Paints was included in Forbes Asia\'s \'Fab 50\' list of Companies in Asia Pacific in 2011, 2012, 2013 and 2014.  Forbes Global magazine USA ranked Asian Paints among the \'200 Best Small Companies in the World\' for 2002 and 2003 and presented the \'Best under a Billion\' award, to the company. Asian Paints is the only paint company in the world to receive this recognition. Forbes has also ranked Asian Paints among the \'Best under a Billion companies in Asia\' in 2005, 2006 and 2007. The company was also felicitated as one of the most \'Impactful companies of the Decade\' by CNBC Awaaz in Jan 2015 ", pclose: 1170, ovalue: 1175, lcircuit: 1080, ucircuit: 1290, dividend: 750, bvalue: 60)]
    
    @IBOutlet weak var time: UILabel!
    @IBOutlet weak var activity: UIActivityIndicatorView!
    override func viewDidLoad() {
        super.viewDidLoad()
        // Do any additional setup after loading the view.
        
        self.navigationController?.setNavigationBarHidden(true, animated: false)

        activity.stopAnimating()
    }
    
    override func viewWillAppear(_ animated: Bool) {
        super.viewWillAppear(animated)
        // disables the navigation bar
        self.navigationController?.setNavigationBarHidden(true, animated: false)
    }

    override func didReceiveMemoryWarning() {
        super.didReceiveMemoryWarning()
        // Dispose of any resources that can be recreated.
    }
    
    func tableView(_ tableView: UITableView, cellForRowAt indexPath: IndexPath) -> UITableViewCell {
        // Conforms to the UITableViewDataSource protocol
        var cell: UITableViewCell
        cell = getDetailedStockCell(tableView, index: indexPath.row)
        return cell
    }
    
    func tableView(_ tableView: UITableView, numberOfRowsInSection section: Int) -> Int {
        return stocks.count
    }
    
    func tableView(_ tableView: UITableView, heightForRowAt indexPath: IndexPath) -> CGFloat {
        tableView.estimatedRowHeight = 170.0
        let height = UITableViewAutomaticDimension
        return height
    }
    
    func tableView(_ tableView: UITableView, didSelectRowAt indexPath: IndexPath) {
        let segueIdentifier = "FullStockFromDetails"
        performSegue(withIdentifier: segueIdentifier, sender: stocks[indexPath.row])
    }
    
    func getDetailedStockCell(_ tableView: UITableView, index: Int) -> DetailedStockTableViewCell {
        let cellIdentifier = "Detail"
        let cell = tableView.dequeueReusableCell(withIdentifier: cellIdentifier) as! DetailedStockTableViewCell
        
        let stock = stocks[index]
        var triangle = "▼"
        
        cell.difference.textColor = .red
        
        if(stock.gain) {
            cell.difference.textColor = .green
            triangle = "▲"
        }
        
        cell.name.text = stock.name
        cell.current.text = "₹\(stock.current)"
        cell.difference.text = "\(triangle) ₹\(stock.difference)"
        cell.percentage.text = "\(stock.percentage)%"
        cell.profile.text = "\(stock.profile)"
        cell.sector.text = "\(stock.sector)"
        
        return cell
    }
    
    
    // MARK: - Navigation

    // In a storyboard-based application, you will often want to do a little preparation before navigation
    override func prepare(for segue: UIStoryboardSegue, sender: Any?) {
        // Get the new view controller using segue.destinationViewController.
        // Pass the selected object to the new view controller.
        if segue.identifier == "FullStockFromDetails" {
            let destinationViewController = segue.destination as! FullStockViewController
            destinationViewController.stock = sender as! DetailedStockItem
        }
    }

}
